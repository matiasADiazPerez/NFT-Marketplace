<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>marketplace documentation</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
	   <link rel="stylesheet" href="../styles/style.css">
        <link rel="stylesheet" href="../styles/dark.css">
    </head>
    <body>

        <div class="navbar navbar-default navbar-fixed-top d-block d-sm-none">
            <a href="../" class="navbar-brand">marketplace documentation</a>
            <button type="button" class="btn btn-default btn-menu ion-ios-menu" id="btn-menu"></button>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
                <div id="book-search-input" role="search"><input type="text" placeholder="Type to search"></div>            <compodoc-menu></compodoc-menu>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="hidden-xs menu">
                   <compodoc-menu mode="normal"></compodoc-menu>
               </div>
               <!-- START CONTENT -->
               <div class="content miscellaneous-variables">
                   <div class="content-data">


















<ol class="breadcrumb">
  <li class="breadcrumb-item">Miscellaneous</li>
  <li class="breadcrumb-item">Variables</li>
</ol>

<section data-compodoc="block-index">
    <h3 id="index">Index</h3>
    <table class="table table-sm table-bordered index-table">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <ul class="index-list">
                        <li>
                            <a href="#finishAuction" title="src/common/tools/tools.ts" ><b>finishAuction</b>&nbsp;&nbsp;&nbsp;(src/.../tools.ts)</a>
                        </li>
                        <li>
                            <a href="#HandleErr" title="src/common/errors.ts" ><b>HandleErr</b>&nbsp;&nbsp;&nbsp;(src/.../errors.ts)</a>
                        </li>
                        <li>
                            <a href="#IS_PUBLIC_KEY" title="src/auth/auth.guard.ts" ><b>IS_PUBLIC_KEY</b>&nbsp;&nbsp;&nbsp;(src/.../auth.guard.ts)</a>
                        </li>
                        <li>
                            <a href="#Public" title="src/auth/auth.guard.ts" ><b>Public</b>&nbsp;&nbsp;&nbsp;(src/.../auth.guard.ts)</a>
                        </li>
                    </ul>
                </td>
            </tr>
        </tbody>
    </table>
</section>

    <h3>src/common/tools/tools.ts</h3>
    <section data-compodoc="block-properties">
    <h3></h3>    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="finishAuction"></a>
                    <span class="name">
                        <span ><b>finishAuction</b></span>
                        <a href="#finishAuction"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>async (
  seller: User,
  bidder: User,
  offer: SellOffer,
  client: Client,
) &#x3D;&gt; {
  const bid &#x3D;
    offer.auctionState &#x3D;&#x3D;&#x3D; AuctionState.OnSale ? offer.price : offer.currentBid;
  const weiBid &#x3D; utils.toWei(bid.toString(), &#x27;ether&#x27;);
  const buyInput &#x3D; {
    tokenId: offer.tokenId.toString(),
    bid: weiBid,
  };

  const approveToken &#x3D; client.approveToken(
    bidder.userKey,
    process.env.FINISH_CONTRACT,
    buyInput.bid,
  );
  const approveNft &#x3D; client.approveNft(
    seller.userKey,
    process.env.FINISH_CONTRACT,
    buyInput.tokenId,
  );
  await Promise.all([approveToken, approveNft]);
  const ans &#x3D; await client.finishAuction(
    bidder.userKey,
    seller.userKey,
    buyInput,
  );
  if (ans[&#x27;transactionHash&#x27;]) {
    offer.finishAuctionTx &#x3D; String(ans[&#x27;transactionHash&#x27;]);
  }
  offer.auctionState &#x3D; AuctionState.Closed;
}</code>
                    </td>
                </tr>

            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Helper that ends a sell offer.
It will approves the tokens and nft to be transfered.
Then it will execute the finish auction method in the marketplace contract to transfer the tokens to the seller and the nft to the bidder.</p>
</div>
                </td>
            </tr>

        </tbody>
    </table>
</section>
    <h3>src/common/errors.ts</h3>
    <section data-compodoc="block-properties">
    <h3></h3>    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="HandleErr"></a>
                    <span class="name">
                        <span ><b>HandleErr</b></span>
                        <a href="#HandleErr"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>(
  err: InvalidId | DeletedEntity | HttpException | Error,
) &#x3D;&gt; {
  if (err instanceof InvalidId || err instanceof DeletedEntity) {
    throw new HttpException(err.message, HttpStatus.BAD_REQUEST);
  }

  if (err instanceof EntityNotFound) {
    throw new HttpException(err.message, HttpStatus.NOT_FOUND);
  }

  if (err instanceof HttpException) {
    throw err;
  }
  throw new HttpException(err.message, HttpStatus.INTERNAL_SERVER_ERROR);
}</code>
                    </td>
                </tr>


        </tbody>
    </table>
</section>
    <h3>src/auth/auth.guard.ts</h3>
    <section data-compodoc="block-properties">
    <h3></h3>    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="IS_PUBLIC_KEY"></a>
                    <span class="name">
                        <span ><b>IS_PUBLIC_KEY</b></span>
                        <a href="#IS_PUBLIC_KEY"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>&#x27;isPublic&#x27;</code>
                    </td>
                </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="Public"></a>
                    <span class="name">
                        <span ><b>Public</b></span>
                        <a href="#Public"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>() &#x3D;&gt; SetMetadata(IS_PUBLIC_KEY, true)</code>
                    </td>
                </tr>


        </tbody>
    </table>
</section>



                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
               <!-- END CONTENT -->
           </div>
       </div>

          <label class="dark-mode-switch">
               <input type="checkbox">
               <span class="slider">
                    <svg class="slider-icon" viewBox="0 0 24 24" fill="none" height="20" stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" width="20" xmlns="http://www.w3.org/2000/svg">
                    <path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"></path>
                    </svg>
               </span>
          </label>

       <script>
            var COMPODOC_CURRENT_PAGE_DEPTH = 1;
            var COMPODOC_CURRENT_PAGE_CONTEXT = 'miscellaneous-variables';
            var COMPODOC_CURRENT_PAGE_URL = 'variables.html';
            var MAX_SEARCH_RESULTS = 15;
       </script>

       <script src="../js/libs/custom-elements.min.js"></script>
       <script src="../js/libs/lit-html.js"></script>

       <script src="../js/menu-wc.js" defer></script>
       <script nomodule src="../js/menu-wc_es5.js" defer></script>

       <script src="../js/libs/bootstrap-native.js"></script>

       <script src="../js/libs/es6-shim.min.js"></script>
       <script src="../js/libs/EventDispatcher.js"></script>
       <script src="../js/libs/promise.min.js"></script>
       <script src="../js/libs/zepto.min.js"></script>

       <script src="../js/compodoc.js"></script>

       <script src="../js/tabs.js"></script>
       <script src="../js/menu.js"></script>
       <script src="../js/libs/clipboard.min.js"></script>
       <script src="../js/libs/prism.js"></script>
       <script src="../js/sourceCode.js"></script>
          <script src="../js/search/search.js"></script>
          <script src="../js/search/lunr.min.js"></script>
          <script src="../js/search/search-lunr.js"></script>
          <script src="../js/search/search_index.js"></script>
       <script src="../js/lazy-load-graphs.js"></script>


    </body>
</html>
